<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <title>dIA.better</title>
</head>
<body>
    <div id="width">
        <img id="logo" src="{{ url_for('static', filename='logo.svg') }}" alt="logo">
        <header>
            <img id="banner_img" src="{{ url_for('static', filename='banner.svg') }}" alt="">
        </header>
        <h1 id="titulo">Previsão de Diabetes</h1>
        <section id="body">
            <div id="text">
                <p>É uma doença causada pela produção insuficiente ou má absorção de insulina, hormônio que regula a glicose no sangue e garante energia para o organismo. <br> A insulina é um hormônio que tem a função de quebrar as moléculas de glicose(açúcar) transformando-a em energia para manutenção das células do nosso organismo.</p>
                <strong>Descubra agora sua previsão!</strong>
            </div>
            <img src="{{ url_for('static', filename='image.svg') }}" alt="" id="image">
            <div id="inputs">
                <h1>Preencha os espaços abaixo e descubra </h1>
                <form action="/predict" method="POST" onsubmit="return formatarNumeros()">
                    <div id="grid_input">
                        <input id="input_idade" type="number" name="age" placeholder="Sua idade">
                        <input id="input_imc" type="text" name="bmi" placeholder="Seu IMC">
                        <input id="input_glicose" type="number" name="blood_glucose_level" placeholder="Seu nível de glicose">
                        <input id="input_hba1c" type="text" name="HbA1c_level" placeholder="Seu hbA1c">
                        <label for="gender">Gênero:</label>
                        <select name="gender">
                            <option value="male">Homem</option>
                            <option value="female">Mulher</option>
                        </select>
                        <label for="hypertension">Possui hipertensão:</label>
                        <select name="hypertension">
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                        <label for="smoking_history">Seu histórico de fumo:</label>
                        <select name="smoking_history">
                            <option value="never">Nunca fumei</option>
                            <option value="current">Fumo atualmente</option>
                            <option value="former">Parei de fumar</option>
                            <option value="ever">Sempre fumei</option>
                            <option value="not current">Atualmente não fumo</option>
                        </select>
                        <label for="heart_disease">Possui problema de coração:</label>
                        <select name="heart_disease">
                            <option value="1">Sim</option>
                            <option value="0">Não</option>
                        </select>
                       
                    
                        <button id="botao_azul" type="submit" >Calcular</button>
                        <button id="botao_vermelho" type="reset" >Limpar</button>
                        <p id="resultado">Resultado: <strong id="resultado-prediction"></strong></p>
                    </div>
                </form>
            </div>
            <div id="imc">
                <a href="{{ url_for('outra_pagina') }}"><button id="botao_azul">Não sabe seu IMC? Descubra agora!</button></a>
                <p>IMC é a sigla para Índice de Massa Corpórea, parâmetro...</p>
            </div>
        </section>
        <section id="body2">
            <h1 id="titulo">Banco de dados - Previsão de diabetes</h1>
            <div></div>
            <div style="background-color: #D9D9D9; padding: 10px 20px;">
                <p>O banco de dados utilizado neste website foi projetado para auxiliar na previsão do diabetes com base em indicadores-chave de saúde, como idade, sexo, índice de massa corporal (IMC), hipertensão, doença cardíaca, histórico de tabagismo, nível de HbA1c e nível de glicose no sangue.<br><br>
                    Ele contém registros de dados do paciente e vários atributos que influenciam a probabilidade de desenvolver diabetes. Este Dataset será utilizado para construir modelos de aprendizado de máquina que podem prever a probabilidade de diabetes em pacientes com base em seu histórico médico e detalhes demográficos.<br><br>
                    A previsão deste website é feita através de uma IA e foi utilizado um banco de dados fornecidos pela Kaggle, cujo tamanho possui 1000 linhas e 9 colunas.<br><br>
                    O arquivo diabetes_prediction_dataset.csv contém dados médicos e demográficos de pacientes, juntamente com seu status de diabetes, seja positivo ou negativo.<br><br>
                </p>
            </div>
            <div></div>
        </section>
        <section id="body2">
            <div>
                <h2>Sobre a Diabetes</h2>
                <p>O diabetes tipo 1 ocorre em 5 a 10% dos casos, quando o sistema imunológico ataca as células produtoras de insulina, resultando em pouca ou nenhuma produção, o que aumenta os níveis de glicose no sangue. Já o diabetes tipo 2 é geralmente assintomático e se manifesta na vida adulta, especialmente após os 40 anos, com evolução lenta e risco de complicações. <br><br> <strong> >> Está associado a excesso de peso, sedentarismo, má alimentação e histórico familiar de diabetes.</strong> <br><br> A seguir, é possível observar dois gráficos. ambos mostram um aumento significativo à medida que os pacientes envelhecem. <br><br>Esse crescimento indica que a probabilidade de desenvolver diabetes e hipertensão se intensifica com o avanço da idade. A resistência à insulina e as mudanças metabólicas são fatores que contribuem para o aumento da diabetes, enquanto o endurecimento dos vasos sanguíneos e alterações na função cardíaca estão relacionados à hipertensão. <br><br>Além disso, é importante destacar que essas duas condições frequentemente coexistem, aumentando o risco de complicações cardiovasculares. Isso ressalta a necessidade de monitoramento constante e intervenções preventivas em populações mais velhas, como a adoção de estilos de vida saudáveis. </p>
            </div>
            <div></div>
        </section>
        <div id="flex">
            <img id="grafico" src="{{ url_for('static', filename='grafico-1.svg') }}" alt="">
            <img id="grafico" src="{{ url_for('static', filename='grafico-2.svg') }}" alt="">
        </div>
    </div>
    <footer>
        <p>
            @Copyright 
        </p>
        <p>
            Banco de dados - <a href="https://www.kaggle.com/datasets/iammustafatz/diabetes-prediction-dataset/data">https://www.kaggle.com/datasets/iammustafatz/diabetes-prediction-dataset/data</a>
        </p>
    </footer>
    <script>
        const resultadoPrediction = "{{ prediction }}";
        if (resultadoPrediction) {
            document.getElementById("resultado-prediction").textContent = resultadoPrediction;
        }
        // Verifica se há um valor de IMC salvo e insere no campo de IMC
        const imcValue = sessionStorage.getItem("imcValue");
        if (imcValue) {
            let imcValueFormatado = imcValue.replace(",", ".");
            document.getElementById("input_imc").value = imcValueFormatado;
            sessionStorage.removeItem("imcValue"); // Remove o IMC após preenchê-lo
        }

        function formatarNumeros() {
            const imcInput = document.getElementById("input_imc");
            const hba1cInput = document.getElementById("input_hba1c");

            imcInput.value = imcInput.value.replace(",", ".");
            hba1cInput.value = hba1cInput.value.replace(",", ".");

            if (isNaN(parseFloat(imcInput.value)) || isNaN(parseFloat(hba1cInput.value))) {
                alert("Por favor, insira valores válidos para IMC e/ou HbA1c.");
                return false; 
            }

            return true; 
        }
    </script>
</body>
</html>